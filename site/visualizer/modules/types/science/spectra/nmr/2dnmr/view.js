"use strict";define(["modules/default/defaultview","components/jsNMR/src/nmr","jcampconverter"],function(a,b,c){function d(){}return $.extend(!0,d.prototype,a,{init:function(){this.dom=$("<div />"),this.module.getDomContent().html(this.dom),this.resolveReady()},inDom:function(){this.nmr=new b({dom:this.dom,mode:"2d",symmetric:!0,minimap:!1})},onResize:function(){this.nmr.resize2DTo(this.width,this.height)},blank:{jcampx:function(a){this.nmr.removeSerie2DX(a)},jcampy:function(a){this.nmr.removeSerie2DY(a)},jcamp2d:function(a){this.nmr.removeSerie2D(a)},jcampxy:function(a){this.nmr.removeSerie2DX(a),this.nmr.removeSerie2DY(a)}},update:{jcampx:function(a){this.addSerieJcampXOrY(a,!0,!1)},jcampy:function(a){this.addSerieJcampXOrY(a,!1,!0)},jcampxy:function(a){this.addSerieJcampXOrY(a,!0,!0)},jcamp2d:function(a,b){function d(a,b,c){return 0>c&&(c+=1),c>1&&(c-=1),1/6>c?a+6*(b-a)*c:.5>c?b:2/3>c?a+(b-a)*(2/3-c)*6:a}function e(a,b,c){var e,f,g;if(0==b)e=f=g=c;else{var h=.5>c?c*(1+b):c+b-c*b,i=2*c-h;e=d(i,h,a+1/3),f=d(i,h,a),g=d(i,h,a-1/3)}return[Math.round(255*e),Math.round(255*f),Math.round(255*g)]}var f=this,g={lineColor:"rgb("+e(100/360,.8,.4).join()+")",twoDColor:{fromPositive:{h:100,s:.3,l:.7},toPositive:{h:100,s:1,l:.5},fromNegative:{h:100,s:.3,l:.5},toNegative:{h:100,s:1,l:.3}}};c.convert(String(a.get()),!0).then(function(a){var b=a.contourLines;f.nmr.setSerie2D("SomeName",b,g),f.redraw()})},annotations:function(a){}},addSerieJcampXOrY:function(a,b,d){var e=this,f="SomeName",g={label:"Chemical 1"};c.convert(String(a.get()),!0).then(function(a){var c=a.spectra[0].data[0];b&&e.nmr.setSerie2DX(f,c,g),d&&e.nmr.setSerie2DY(f,c,g),e.redraw()})},redraw:function(){this.nmr.redrawAll2D()}}),d});